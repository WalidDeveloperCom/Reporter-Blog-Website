{% extends 'base.html' %}
{% load static %}
{% block title %}Contact Us - Reporter Blog{% endblock %}

{% block content %}
<section class="section">
  <div class="container">
    <div class="row">
      <div class="col-12">
        <div class="breadcrumbs mb-4">
          <a href="{% url 'home' %}">Home</a>
          <span class="mx-1">/</span>
          <a href="{% url 'contact' %}">Contact</a>
        </div>
      </div>
      <div class="col-lg-4">
        <div class="pr-0 pr-lg-4">
          <div class="content">
            Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labor.
            <div class="mt-5">
              <p class="h3 mb-3 font-weight-normal">
                <a class="text-dark" href="mailto:contact@example.com">contact@example.com</a>
              </p>
              <p class="mb-3">
                <a class="text-dark" href="tel:+1234567890">+1 (234) 567-890</a>
              </p>
              <p class="mb-2">123 Main Street, City, Country</p>
            </div>
          </div>
        </div>
      </div>
      <div class="col-lg-6 mt-4 mt-lg-0">
        <!-- Update form action URL here -->
        <form method="POST" action="{% url 'contact' %}" class="row" id="contact-form">
            {% csrf_token %}
            
            <div class="col-md-6">
                {{ form.name }}
            </div>
            
            <div class="col-md-6">
                {{ form.email }}
            </div>
            
            <div class="col-12 mt-3">
                {{ form.subject }}
            </div>
            
            <div class="col-12 mt-3">
                {{ form.message }}
            </div>
            
            <div class="col-12 mt-5">
                <button class="btn btn-outline-primary" type="submit">Send Message</button>
            </div>
        </form>
      </div>
    </div>
  </div>
</section>

{% if messages %}
  <div id="message-toast" class="d-none">
    {% for message in messages %}
      <div class="toast-message" data-type="{{ message.tags }}">
        {{ message }}
      </div>
    {% endfor %}
  </div>
{% endif %}

{% block extra_js %}
<script src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
<script>
  // Check if there are messages and display them as Toast
  const messageElement = document.getElementById('message-toast');
  if (messageElement && messageElement.children.length > 0) {
    const messageType = messageElement.querySelector('.toast-message').getAttribute('data-type');
    const messageText = messageElement.querySelector('.toast-message').innerText;
    
    // Configure Toastify options based on message type
    Toastify({
      text: messageText,
      duration: 5000, // 5 seconds
      backgroundColor: messageType === 'success' ? 'green' : 'red',
      close: true,
      position: "center",// `left`, `center` or `right`
      gravity: "top",  // `top` or `bottom`
      stopOnFocus: true, // Prevents dismissing of toast on hover
    }).showToast();
  }
</script>
{% endblock %}
{% endblock %}
